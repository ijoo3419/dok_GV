<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Movie">
	<resultMap type="Movie" id="movieResultSet">
		<id property="movie_id" column="MOVIE_ID"/>
		<result property="movie_title" column="MOVIE_TITLE"/>
		<result property="movie_etitle" column="MOVIE_ETITLE"/>
		<result property="movie_content" column="MOVIE_CONTENT"/>
		<result property="open_date" column="OPEN_DATE"/>
		<result property="director_name" column="DIRECTOR_NAME"/>
		<result property="production_com" column="PRODUCTION_COM"/>
		<result property="movie_age" column="MOVIE_AGE"/>
		<result property="genre" column="GENRE"/>
		<result property="running_time" column="RUNNIG_TIME"/>
	</resultMap>
	
	<!-- 박지용 영화 리스트를 ResultSet -->
	<resultMap type="Movie" id="movieResultSetTwo">
		<id property="turning_id" column="TURNING_ID"/>
		<result property="movie_id" column="MOVIE_ID"/>
		<result property="movie_title" column="MOVIE_TITLE"/>
		<result property="movie_etitle" column="MOVIE_ETITLE"/>
		<result property="movie_content" column="MOVIE_CONTENT"/>
		<result property="open_date" column="OPEN_DATE"/>
		<result property="director_name" column="DIRECTOR_NAME"/>
		<result property="production_com" column="PRODUCTION_COM"/>
		<result property="movie_age" column="MOVIE_AGE"/>
		<result property="genre" column="GENRE"/>
		<result property="play_id" column="PLAY_ID"/>
		<result property="price" column="PRICE"/>
		<result property="turning_day" column="TURNING_DAY"/>
		<result property="turning_time" column="TURNING_TIME"/>
		<result property="movieroom_id" column="MOVIEROOM_ID"/>
		<result property="play_status" column="PLAY_STATUS"/>
	</resultMap>
	
	<!-- 박지용 상영 리스트를 ResultSet -->
	<resultMap type="Movie" id="movieResultSetTree">
		<id property="turning_id" column="TURNING_ID"/>
		<result property="movie_id" column="MOVIE_ID"/>
		<result property="movie_title" column="MOVIE_TITLE"/>
		<result property="movie_etitle" column="MOVIE_ETITLE"/>
		<result property="movie_content" column="MOVIE_CONTENT"/>
		<result property="open_date" column="OPEN_DATE"/>
		<result property="director_name" column="DIRECTOR_NAME"/>
		<result property="production_com" column="PRODUCTION_COM"/>
		<result property="movie_age" column="MOVIE_AGE"/>
		<result property="genre" column="GENRE"/>
		<result property="play_id" column="PLAY_ID"/>
		<result property="price" column="PRICE"/>
		<result property="turning_day" column="TURNING_DAY"/>
		<result property="turning_time" column="TURNING_TIME"/>
		<result property="movieroom_id" column="MOVIEROOM_ID"/>
		<result property="play_status" column="PLAY_STATUS"/>
		
		<result property="area_id" column="AREA_ID"/>
		<result property="area_name" column="AREA_NAME"/>
		<result property="area_level" column="AREA_LEVEL"/>
		<result property="area_parents" column="AREA_PARENTS"/>
		
		<result property="theater_id" column="THEATER_ID"/>
		<result property="theater_name" column="THEATER_NAME"/>
		
		<result property="theater_type" column="THEATER_TYPE"/>
	</resultMap>
	
	<!-- 박지용 영화 리스트를 ResultSet -->
	<resultMap type="Movie" id="movieResultSetFour">
		<id property="turning_day" column="TURNING_DAY"/>
	</resultMap>
	
	<!-- 박지용 영화 리스트를 가져오는 쿼리문 -->
	<select id="selectMovieList" resultMap="movieResultSetTwo" parameterType="Movie">
		SELECT DISTINCT MOVIE.MOVIE_ID, MOVIE.MOVIE_TITLE 
		FROM MOVIE, PLAY
		WHERE MOVIE.MOVIE_ID = PLAY.MOVIE_ID
		AND PLAY_STATUS = 'Y'
	</select>
	
	<!-- 박지용 상영 리스트를 가져오는 쿼리문 -->
	<select id="selectTurningList" resultMap="movieResultSetTree" parameterType="Movie">
		SELECT * 
		FROM TURNING, PLAY, MOVIE, MOVIEROOM, THEATER, AREA
		WHERE PLAY.PLAY_ID = TURNING.PLAY_ID 
		AND MOVIE.MOVIE_ID = PLAY.MOVIE_ID 
		AND MOVIEROOM.MOVIEROOM_ID = PLAY.MOVIEROOM_ID
		AND THEATER.THEATER_ID = MOVIEROOM.THEATER_ID
		AND AREA.AREA_ID = THEATER.AREA_ID
		AND PLAY_STATUS = 'Y' 
		AND TURNING_DAY = #{turning_day}
		AND AREA.AREA_ID = #{area_id}
		AND MOVIE.MOVIE_ID = #{movie_id}
	</select>
	
	<!-- 박지용 날짜 리스트를 가져오는 쿼리문 -->
	<select id="selectDateList" resultMap="movieResultSetFour" parameterType="Movie">
		SELECT DISTINCT TURNING.TURNING_DAY 
		FROM TURNING, PLAY, MOVIE, MOVIEROOM, THEATER, AREA
		WHERE PLAY.PLAY_ID = TURNING.PLAY_ID 
		AND MOVIE.MOVIE_ID = PLAY.MOVIE_ID 
		AND MOVIEROOM.MOVIEROOM_ID = PLAY.MOVIEROOM_ID
		AND THEATER.THEATER_ID = MOVIEROOM.THEATER_ID
		AND AREA.AREA_ID = THEATER.AREA_ID
		AND PLAY_STATUS = 'Y' 
		AND AREA.AREA_ID = #{area_id}
		AND MOVIE.MOVIE_ID = #{movie_id}
	</select>

</mapper>